<!DOCTYPE html>

<meta charset=utf-8>
<title>blog.izs.me</title>
<link rel=stylesheet href=../backup.css>

<body class=archive>

<header>
<h1>June 2007</h1>
</header>

<article class=text id=p-146671538>
<header>
<p><time datetime=2007-06-20T19:10:14Z>06/20/2007 12:10:14</time>
<a class=llink href=../posts/146671538.html>¶</a>
<a href=https://tmblr.co/Z7nwWy8lWUo>●</a></header>
<h2>Harry Potter Brand Site</h2>
<p>We just launched <a href="http://harrypotter.yahoo.com/">harrypotter.yahoo.com</a>.  Woot!</p>
<footer><a href=http://izs.tumblr.com/tagged/Pushed%20Into%20the%20Wild>#Pushed Into the Wild</a>
</footer>
</article>
<article class=text id=p-146671514>
<header>
<p><time datetime=2007-06-20T17:00:05Z>06/20/2007 10:00:05</time>
<a class=llink href=../posts/146671514.html>¶</a>
<a href=https://tmblr.co/Z7nwWy8lWUQ>●</a></header>
<h2>The Art of the Resume: Why You Probably Shouldn't Use MS Word </h2>
<p>A resume is an advertisement.  You are selling your time and attention, and trying to get some potential employer (who is a <strong>buyer</strong>, and a potential <strong>customer</strong>) to purchase said time and attention at a competitive price.  Advertisements exist to make someone want something.</p>

<p>Most engineers aren&rsquo;t all that savvy about the subtle art of advertising, and as a result, tend to view a resume as more like a letter than a print ad.  (Or, more like an email than an LRec, for those of you born after the digital revolution.) They learned in High School that the way to write a resume is:</p>

<ol><li>Open up Microsoft Word (or OpenOffice, for the anti M$ types.)</li>
    <li>Click File &gt; New&hellip;, and then select &ldquo;Resume Wizard&rdquo; as the type of document.</li>
    <li>Select the style.</li>
    <li>Enter your demographic and historical information.</li>
    <li>Spellcheck (or don&rsquo;t), save, email to recruiter or upload to job site.</li>
</ol><p>They probably also learned that it has to be one page, because recruiters &ldquo;look at a lot of resumes, and don&rsquo;t have time to deal with any that are more than one <em>sheet of paper</em>.&rdquo;</p>

<p>This is a great way to ensure that your resume is completely like every other resume, and also show recruiters and hiring managers that you have a quaint attachment to the historical ways of yestercentury.</p>

<p>A resume is not a letter.  It&rsquo;s not an email.  It&rsquo;s not a friendly chat.  It&rsquo;s an advertisement.  Telling is nice, but showing is better.  If I&rsquo;m buying, I want to know what I&rsquo;m getting.</p>

<p>It&rsquo;s also not a high-school homework assignment.  And if you think &ldquo;oh, advertising isn&rsquo;t my bag, I&rsquo;ll just do what everyone else does,&rdquo; then why should a hiring manager take your career more seriously than you do?</p>

<p>If you&rsquo;re a web developer, then your resume should be an active testament to your skills.  It&rsquo;s not enough to have links to stuff you&rsquo;ve done (although that&rsquo;s important, too.)  It should be in clean semantic HTML, and it should be styled with CSS.  Throw some Javascript in there to do a little something.  Test it in different browsers.  Put it online.  Link to it on your blog.  (You DO have a blog or personal website, don&rsquo;t you?)  This is especially important if you&rsquo;re a bit junior and don&rsquo;t have much of a portfolio yet, or if your portfolio contains a lot of behind-the-curtain intranet or login-only projects.</p>

<p>These things communicate a lot without having to say anything, and the words-behind-the-words are usually what speak loudest.  Putting your resume in HTML that you write from scratch gives a potential employer a very clear view of your ability.  A personal website gives them a view into your personality, lets them hear your voice.  If I&rsquo;m in on the decision to hire someone, a resume built in HTML and CSS is significantly more important than a college degree.  You&rsquo;ve gotta be pretty good for me to vote &ldquo;yes&rdquo; if you wrote your resume in Word.  If you <em>must</em> send a non-HTML resume, send text, and provide the URL to your &ldquo;real&rdquo; resume that&rsquo;s online in HTML.  (The one you post online should have this url in it as well, in case it&rsquo;s downloaded and emailed.)</p>

<p>Now is a great time for web developers.  Our talents are (finally!) starting to get respect as more than just an extension of software development or graphic design.  The dollars are speaking, the audiences are getting bigger, executives and stake holders are beginning to take this medium <em>very</em> seriously.  And, it moves so fast that schools and books can&rsquo;t seem to keep up very well.  If you know your stuff, then now is a great time to be a web developer, but it&rsquo;s only a matter of time before the competition is going to get very tough.  Separate yourself from the pack now.</p>

<p>I recently updated my <a href="http://foohack.com/resume/">resume</a>, since it had gotten rather dated and my skills had increased quite a bit.  I did it as a lark and a time-spending activity while I was high on drugs from oral surgery.  I thought, <q>Hey, ya know what? Let&rsquo;s see what happens if I update this and make the HTML a little more search-engine friendly, add some snazzy styles&hellip;</q>  Oh my god&hellip; I&rsquo;ve gotten at least 2 calls and/or emails per week since then.  I can safely say that I&rsquo;m working at Yahoo today because I truly love it here.</p>

<p>If you are a web developer, and you&rsquo;re not happy with your current job, or even if you are, <em>and you&rsquo;re really <strong>really</strong> good at what you do</em>, create a resume in well-constructed HTML, make it look nice, and put it online.  Link to it on your blog, or in your signature if you participate in any web development-related forums.  You&rsquo;ll be glad you did, and you&rsquo;ll be helping the community of web developers in the long run by helping to keep our craft a highly valued commodity.</p>

<p>Some tips:</p>

<ul><li>It may be downloaded and emailed.  Try, if you can, to put all of your styles and scripts inline, and don&rsquo;t rely too heavily on images, if you use them at all.</li>
    <li>Spell-check it.</li>
    <li><strong>Do not plagiarize.</strong> It looks very bad.  If you use a library or a common technique in your code, then cite it, post the license agreement, whatever.  Using a widely-known technique (and citing the source) shows that you&rsquo;re in touch with the greater webdev community.  Stay legal, and be respectful of those who have shared with the community.  Violate this rule with serious risks&mdash;it can even get you fired by your shiny new employer.</li>
    <li>Make it as long as it needs to be, but keep each piece short.</li>
    <li>Put education near the bottom.  If you didn&rsquo;t go to college, then don&rsquo;t even put it.  It doesn&rsquo;t matter as much as experience, in this field.</li>
</ul><p>Recruiters are sharks.  They are mercenaries stop at nothing for the referral bonus.  They scour <abbr title="Search Engine Results Pages">SERPs</abbr> 50 pages deep looking for fresh meat.  They read web development blogs and forums looking for the gurus.  They will find you if you let them.</p>
<footer><a href=http://izs.tumblr.com/tagged/The%20Business>#The Business</a>
</footer>
</article>
<article class=text id=p-146671469>
<header>
<p><time datetime=2007-06-18T17:00:03Z>06/18/2007 10:00:03</time>
<a class=llink href=../posts/146671469.html>¶</a>
<a href=https://tmblr.co/Z7nwWy8lWTj>●</a></header>
<h2>Javascript Style Tip: Use "in" and "delete"</h2>
<p>Javascript provides two very handy operators, <a href="http://developer.mozilla.org/en/docs/Core_JavaScript_1.5_Reference:Operators:Special_Operators:in_Operator">in</a> and <a href="http://developer.mozilla.org/en/docs/Core_JavaScript_1.5_Reference:Operators:Special_Operators:delete_Operator">delete</a>.</p>

<p>Consider this code fragment:</p>

<p><code class="block javascript">var obj = {
 foo : 'quux',
 bar : 'baz',
 doSomething : function () {
  // do something...
 }
};</code></p>

<p>So, we&rsquo;ve created an object, and then some other things happen.  Later in the code, we want to remove the &ldquo;foo&rdquo; property, so we do this:</p>

<p><code class="javascript block">obj.foo = undefined;</code></p>

<p>Still later, we only want to do something if the foo property has not been unset, so we check it:</p>

<p><code class="javascript block">if ( obj.foo !== undefined ) {
 // do something
}</code></p>

<p>That works, and it&rsquo;s fairly common, but it&rsquo;s klunky, and not as readable as this:</p>

<p><code class="javascript block">delete obj.foo;</code></p>

<p><code class="javascript block">if ( 'foo' in obj ) {
 // do something
}</code></p>

<p>The first one says, <q>Delete &ldquo;foo&rdquo; from the object.</q>  The second asks, <q>Is &ldquo;foo&rdquo; in the object?</q>  The difference between the first and second approaches is that the second uses intuitive wording in the code.</p>

<p>Note: You <em>must</em> use <code>delete</code> if you want to use <code>in</code>.  Setting something to <code>undefined</code> manually will not cause it to return false when testing whether the property is <code>in</code> the object.</p>

<p>As an added bonus, using the <code>delete</code> operator also removes the property from the for/in iteration loop, since it actually removes it from the object&rsquo;s key list rather than simply setting it&rsquo;s value to <code>undefined</code>.</p>

<p><code class="block javascript">var obj = {asdf:'foo',bar:'baz'};
obj.asdf = undefined;
for ( var i in obj ) {
 console.log(i,obj[i]);
}
// outputs:
// asdf undefined
// bar baz</code></p>

<p><code class="block javascript">var obj = {asdf:'foo',bar:'baz'};
delete obj.asdf;
for ( var i in obj ) {
 console.log(i,obj[i]);
}
// outputs:
// bar baz</code></p>

<p>Note: you&rsquo;ll need to wrap the &ldquo;in&rdquo; statement in parentheses if you want to negate it.  For example, this is a bug:</p>

<p><code class="block javascript">var obj = { asdf:'foo',bar:'baz' };
var f = 'quux';
if ( !f in obj ) {
 alert( 'not there!' );
}</code></p>

<p>The alert will never fire.  Can you figure out what&rsquo;s happening?  Here&rsquo;s a clue:</p>

<p><code class="block javascript">var obj = { 'false':1, asdf:'foo', bar:'baz' };
var f = 'quux';
if ( !f in obj ) {
 alert( 'not there!' );
}</code></p>

<p>Now the alert will fire.  What&rsquo;s up?</p>

<p>The order of operations is this:</p>

<ol><li>Process the !f, which converts &lsquo;quux&rsquo; to a boolean (true), and then gets the opposite (false).</li>
    <li>The &ldquo;in&rdquo; operator converts the value back to a string, and false.toString() is the string 'false&rsquo;.</li>
    <li>Since 'false&rsquo; is not a key in the object, the &ldquo;in&rdquo; operator returns false, and the conditional fails.</li>
</ol><p>In the second case, since the string 'false&rsquo; <em>is</em> a key in the object, the &ldquo;in&rdquo; operator returns true, and the conditional fires.  Of course, using &ldquo;false&rdquo; as a key in an object is a really stupid thing to do, but if some bunk data comes into your program somehow, it can happen.  Always wrap your &ldquo;in&rdquo; clauses in parentheses, and you&rsquo;ll never have a problem.  In this case, it works as expected:</p>

<p><code class="block javascript">var obj = { asdf:'foo', bar:'baz' };
var f = 'quux';
if ( !(f in obj) ) {
 alert( 'not there!' );
}</code></p>

<h3>Update</h3>

<p>I&rsquo;m finding that a lot of people are hitting this page with search queries that seem to indicate they&rsquo;re looking to remove a style property from a Dom node.  <code>delete</code> won&rsquo;t help you much there, since the <code>style</code> property is a get-and-set-only property.  (IE, you can read from and write to it, but you can&rsquo;t delete from it.)</p>

<p>Most of the time, you shouldn&rsquo;t be messing with the <code>style</code> property directly in Javascript, anyhow.  Instead, add and remove semantically meaningful class names, and put the style information related to those states in the CSS.  Of course that&rsquo;s not always an option, I know.  So, you can remove the inline setting by simply setting it to an empty string, like this:</p>

<p><code class="block javascript">document.body.style.background="red"; // turns the page red.
document.body.style.background=""; // turns the page back to whatever it was.</code></p>

<p>Cheers!</p>
<footer><a href=http://izs.tumblr.com/tagged/Code%20Beauty>#Code Beauty</a>
<a href=http://izs.tumblr.com/tagged/Javascript>#Javascript</a>
 — 2 notes</footer>
</article>
<article class=text id=p-146671430>
<header>
<p><time datetime=2007-06-11T17:00:16Z>06/11/2007 10:00:16</time>
<a class=llink href=../posts/146671430.html>¶</a>
<a href=https://tmblr.co/Z7nwWy8lWT6>●</a></header>
<h2>Memory Leaks in Microsoft Internet Explorer</h2>
<p><cite>I originally posted this <a href="http://isaacschlueter.com/2006/10/msie-memory-leaks/">at isaacschlueter.com on Monday, October 23rd, 2006</a>.</cite></p>

<p>Memory Leaks.</p>

<p>What are they?  How do they happen?  What can be done about them?</p>

<p>This is a great question, and a topic that has a lot of mysticism surrounding it.  Like most Javascript issues, there&rsquo;s been a lot of very bad &ldquo;authoritative&rdquo; suggestions.</p>

<p>If you are a webdev interviewing at Yahoo!, and I&rsquo;m in the room, I can guarantee that you will be asked about this topic.  In my opinion, memory leaks are one of the most tricky ways in which a user&rsquo;s web experience can be needlessly degraded.  A web developer&rsquo;s attitude towards memory leaks is, in my opinion, one of the best indicators of their worth in this field.</p>

<p>Either you understand what a memory leak is and how it happens, or you don&rsquo;t.  If you don&rsquo;t, that&rsquo;s fine, but it&rsquo;s time to find out once you hear some buzz about it.  Once you understand it, you can either care about it, or not.  Anyone who doesn&rsquo;t fall into the &ldquo;find out/care about it&rdquo; category would be better off flipping burgers than writing Javascript.</p>

<!--more-->

<h3>What Are Memory Leaks?</h3>

<p>In general, a &ldquo;memory leak&rdquo; is the failure to release memory that has been allocated to a program.  Over time, a memory leak will result in progressively less memory being available to perform valid functions.</p>

<p>In the browser/Javascript world, a memory leak occurs when the native garbage collection routines don&rsquo;t properly reclaim the memory that was allocated for an object.  Each time you create an object in Javascript, a bit of memory is allocated.  Memory is also allocated for DOM nodes, COM objects, images, etc.  When an object can no longer be accessed, it is flagged as &ldquo;ready for removal.&rdquo;  Then the garbage collection routine sweeps up the flagged objects, and releases the memory back to the system.  In Microsoft Internet Explorer 6, there is a bug in the garbage collection routine that can lead to memory leaks in certain conditions.</p>

<p>A good discussion on memory leaks and why and how they happen can be found <a href="http://www.crockford.com/javascript/memory/leak.html">on Crockford&rsquo;s site</a>.  The claim that closures (functions inside of other functions) cause memory leaks is, as Crockford says, &ldquo;deeply wrong.&rdquo;  Closures are fine, and are not the source of the problem.  (However, of course, closures can make circular links trickier to spot.)</p>

<p>The problem happens when you have a Javascript object and DOM node (or any COM object) that refer to one another in a cycle.  IE 6 can&rsquo;t figure out when it should reclaim the memory, so it doesn&rsquo;t ever do it.</p>

<p>For example, this will cause a leak:</p>

<p><code class="block">(function(){
var obj={b:document.body};
document.body.o=obj; // ← circular link is created.  document.body.o.b === document.body
})();</code></p>

<p>If you set either obj.doc.body or body.o to NULL, then you&rsquo;ll break the circular chain, and IE 6 will reclaim the memory.</p>

<p>The cycle doesn&rsquo;t have to be so small.  Even a chain of many steps can cause a leak if it is not broken.  This will cause a leak, too:</p>

<p><code class="block">(function(){
var d={b:document.body}
var obj={doc:d}; // ← obj.doc.b === document.body
document.body.o=obj; // ← Circular loop: document.body.o.doc.b === document.body
})();</code></p>

<p>Sometimes the references aren&rsquo;t explicit, but are created by a scope closure.  (This may be part of the thinking behind the assertion that closures cause memory leaks.)  For example, this will also leak:</p>

<p><code class="block">(function(){
var b=document.body; // ← create a reference to document.body inside of the outer scope.
b.onclick=function() { // ← b.onclick refers to a function.
  // this function can access "b" due to closure
  // do something...
};
})();</code></p>

<p>The anonymous function is assigned to <code>document.body.onclick</code>.  Due to the scope closure, there is a reference (<code>b</code>) created inside of the anonymous function that points back at document.body.  This creates a circular condition that confounds and befuddles the MSIE garbage collector just like the other examples above.</p>

<h3>How To Avoid Memory Leaks</h3>

<p>The simplest way to ensure that you will never have a memory leak is to simply never have circular reference chains that cross between Javascript and DOM space.  Make sure that you always have Javascript objects refer to DOM objects, and never the other way round, or vice versa.</p>

<p>However, it&rsquo;s sometimes extremely convenient to have circular link.  Consider this example:</p>

<p><code class="block">(function(){
var doSomething=function(e) {
  this.innerHTML='did something!';
  this.object.doSomethingElse(this.customPropertyOfSomeKind);
};
myDomNode.object=new myObject();
myDomNode.customPropertyOfSomeKind={some:'data object'};
YAHOO.util.Event.addListener(myDomNode,'click',doSomething);
})();</code></p>

<p>Now, if myObject has any reference to myDomNode (even if it refers to something that refers to something else &hellip; that refers to myDomNode), you&rsquo;ll leak memory.</p>

<h3>How to Fix MSIE&rsquo;s Javascript Memory Leaks</h3>

<p>So, how to fix this?</p>

<p>First, be aware when you&rsquo;re doing things that may cause a leak.  If it&rsquo;s not a very big gain in code simplicity, then figure out another way around.  If you&rsquo;re hanging a lot of Javascript objects onto DOM objects, there&rsquo;s a big chance of a leak creeping in.  Personally, I try to make sure that all my references go from JS→DOM and not the other way around.  If the references are always one-way, then there&rsquo;s no chance of a leak.  (Closures can only create JS→DOM references.)  Also, we&rsquo;ve seen performance issues with hanging too much stuff on DOM nodes if the page is big and complicated (that&rsquo;s anecdotal, and I don&rsquo;t have any hard numbers, so take it for what it&rsquo;s worth.)
If you understand how they work and why they happen, you can save yourself a lot of time later on tracking them down.</p>

<p>Second, test your code with <a href="http://outofhanwell.com/ieleak/index.php?title=Main_Page">Drip</a>.  Test early, test often, and <strong>always</strong> test before you release to production.</p>

<p>I can&rsquo;t possibly stress how important this is.  Even if you&rsquo;ve done everything right, it&rsquo;s easy to overlook circular references if the code gets sufficiently complex.  Even small memory leaks can add up over the course of a session, or in a browser that stays open for days on end.  (It happens quite a bit.  I don&rsquo;t know when I last closed the browser on my home computer, and a lot of users are the same way.)</p>

<p>Third, if you must cause circular references in your code, be responsible about it.  Save a reference to each afflicted DOM node, and break the cycles on window unload.  I often do something like this:</p>

<p><code class="block">(function(){
var unLoaders=[];
myDomNode.object=new myObject(); // ← let's say that this creates a leak somewhere
unLoaders.push(myDomNode); // ← save it for later
// create an "unload" function
var unload=function(){
  for(var i=unLoaders.length-1;i&gt;-1;i--){
    unLoaders[i].object=null; // ← break the cycle
  }
};
// run the unload function on window.unload
YAHOO.util.Event.addListener(window,'unload',unload);
})();</code></p>

<h3>Memory Leaks and <acronym title="Asynchronous Javascript And Xml">Ajax</acronym>/<acronym title="XmlHttpRequest">XHR</acronym></h3>

<p>Ajax is a huge source of memory leaks, and unfortunately in this day and age of fast-prototyping and marketing pushing, a lot of these errors slip out into the world.  If you don&rsquo;t use a polling mechanism of some kind, AJAX applications will leak memory like a bucket with no bottom.  Use the <a href="http://developer.yahoo.com/yui/connection/">YUI connection library for Ajax</a>, and never look back.  It&rsquo;s brilliant, and very easy to use.</p>

<p>So, why do AJAX apps leak memory so badly if you don&rsquo;t use a polling mechanism?  Consider the &ldquo;typical&rdquo; XHR code pattern:</p>

<p><code class="block">(function(){
var x=getXHRobject();
x.onreadystatechange=function() { // ← create link from x (COM object) to anonymous function
  if(x.readystate==4){ // ← reference to x exists inside function scope, creating circular link.
    // do something.
  }
};
})();</code></p>

<p>The XmlHttpRequest object is treated in Javascript much like a DOM node.  (More precisely, this problem affects all COM objects, including DOM nodes.)  If you attach an onreadystatechange handler to it, you&rsquo;ve created a circular loop.  The standard means of breaking these chains won&rsquo;t work.  The YUI connection lib polls the object&rsquo;s readystate until it is done, and then calls your success function.  (If it times out or gets an error, it calls your failure function.)  Since there&rsquo;s no onreadystatechange listener, there&rsquo;s no circular reference, and thus, no memory leak.</p>
<footer><a href=http://izs.tumblr.com/tagged/Internet%20Exploder>#Internet Exploder</a>
<a href=http://izs.tumblr.com/tagged/Javascript>#Javascript</a>
</footer>
</article>
<article class=text id=p-146671405>
<header>
<p><time datetime=2007-06-07T17:00:49Z>06/07/2007 10:00:49</time>
<a class=llink href=../posts/146671405.html>¶</a>
<a href=https://tmblr.co/Z7nwWy8lWSj>●</a></header>
<h2>Web Standards: Nothing Succeeds Like Success</h2>
<p><cite>This is a comment on the A List Apart article, <a href="http://www.alistapart.com/articles/standardsandcompanies/">Evangelizing Outside the Box: Web Standards and Large Companies</a>, by <a href="http://www.alistapart.com/authors/k/peterpaulkoch">Peter-Paul Koch</a>.  I posted <a href="http://www.alistapart.com/comments/standardsandcompanies?page=3#28">the comment on their site</a> on June 04, 2007.</cite></p>

<p>I work at a mega-gigantic web corporation (10,000+ employees across the world, and hundreds of millions of users.) While we don&rsquo;t exactly model PPK&rsquo;s definition of &ldquo;Web company,&rdquo; since we don&rsquo;t (often) create websites for others, we do offer end users: games, instant messaging, news, sports, mail, search, photo-sharing, a top-notch Javascript and CSS framework, and a host of other services, many of which start with &ldquo;Y!&rdquo; ;)</p>

<p><a href="http://www.yahoo.com">Yahoo</a> is a huge proponent of web standards, for very pragmatic reasons. On most teams, you can&rsquo;t get hired as even a junior web developer without a solid background in standards and CSS. At the same time, we host countless 1990-style table-based layout pages, and most of them probably won&rsquo;t be changed any time soon. And yes, some of our internal web apps are simply godaweful.</p>

<p>The all-too-common focus on refactoring legacy pages is misguided and hopeless. There is little, if any, benefit to make up for the herculean effort. However, web companies are typically in the business of creating <strong>new</strong> pages, and this is where the standards movement should move. When an old system is refactored, it&rsquo;s often a wholescale redesign, and that&rsquo;s when a proper approach should be used. Extending a system should almost always use the language of the existing system, and sometimes, yes, that means that you implement the 254th page as table-soup so that it matches the pattern of the other 253.</p>

<p>When it comes to new development, it&rsquo;s a much easier sell. First, you say, &ldquo;I&rsquo;m going to implement this using web standards because it&rsquo;s better.&rdquo; (Or don&rsquo;t say it—just do it.) If that doesn&rsquo;t work (and it usually does), then you point to the huge sites that have used web standards to great advantage—sites like Yahoo, Blogger, ESPN, and others. Talk about their agility, their reach, how this is the new standard. Get involved in the hiring process, and try to hire developers who know about standards. (Usually they&rsquo;re the best choice anyhow.)</p>

<p>If that doesn&rsquo;t work, then build a resume in modern HTML and CSS, put it online, and get ready to move to California. (Seriously, as more employers move to using web standards, it&rsquo;s getting harder to find good web developers these days. You&rsquo;re valuable!) As more standards-using webdevs reach career-maturity, web companies will necessarily shift in that direction, and devs who don&rsquo;t use these methods will find themselves working somewhere else.</p>

<p>Lastly, please, abandon the religious viewpoint. Software is the art of effective trade-offs. It&rsquo;s not math, and there is usually not just one right answer. It does so happen that web standards can be leveraged in many cases to make a big profit in time, effort, and features, but if you&rsquo;re in this business long enough as one of PPK&rsquo;s &ldquo;invisible professionals,&rdquo; you&rsquo;ll eventually find a case where you need a layout table to achieve a certain effect, or where a table-based approach is faster/easier/more maintainable, and the costs are reasonable. W3C approval doesn&rsquo;t not make something necessarily a good method. If you&rsquo;re going to be a zealot, be a zealot about writing high-quality code—usually that means standards, but standards are not a valid end in themselves. I feel like blogging a big fat rant when I can&rsquo;t buy movie tickets on my Blackjack, but web standards zealotry is perceived as naive and misguided by managers and customers alike.</p>
<footer><a href=http://izs.tumblr.com/tagged/Code%20Ecosystems>#Code Ecosystems</a>
<a href=http://izs.tumblr.com/tagged/Sustainability>#Sustainability</a>
</footer>
</article>
<article class=text id=p-146671374>
<header>
<p><time datetime=2007-06-03T03:27:04Z>06/02/2007 20:27:04</time>
<a class=llink href=../posts/146671374.html>¶</a>
<a href=https://tmblr.co/Z7nwWy8lWSE>●</a></header>
<h2>The Most Important Things They Don’t Teach in CompSci 101 (but should): Maintainability</h2>
<p>I stumbled across a <a href="http://www.ibm.com/developerworks/linux/library/l-clear-code/?ca=dgr-FClnxw01linuxcodetips">great article about clean code</a> from Jeff Vogel over at the IBM Developerworks blog site, via a <a href="http://developers.slashdot.org/article.pl?sid=07/05/30/1813247&amp;from=rss">/. article</a>.  Even more valuable was the <a href="http://www.freevbcode.com/ShowCode.Asp?ID=2547">How to write unmaintainable code</a> article, which appears to have grown considerably since I first saw a version of it back in college.</p>

<p>A simple <a href="http://www.google.com/search?q=maintainable+code">web search</a> can uncover a lot of articles about writing maintainable code.  There have been <a href="http://www.amazon.com/s/ref=nb_ss_gw/102-4912607-6304117?url=search-alias%3Daps&amp;field-keywords=maintainable+code&amp;tag=isaacschlcom-20">several books written on the subject</a>.  And yet, I consistently find that code examples and tutorials, not to mention programming text books, very often break all or most of these rules.</p>

<p>To a certain degree, what makes code &ldquo;maintainable&rdquo; is a matter of opinion.  However, it is pretty universally accepted that the vast majority of programmer-hours are spent debugging, fixing, and extending existing code.  It&rsquo;s very rare, even when working on an entirely new project, that you open up a blank file in your text editor and start coding.  After the first few hours of the first day of a project, you&rsquo;re working in an existing code ecosystem.  Is it a crazy jungle with vines and savage beasts?  Or a well-lit sidewalk with friendly pedestrians?</p>

<p>I think these assumptions are pretty safe to make for any programmer in any language:</p>

<ol><li>At least 80% of a programmer&rsquo;s time is spent working with an existing code base (possibly one they just created).</li>
    <li>Debugging code is more difficult than writing it. (Or, problems are harder to fix than to create.)</li>
    <li>Extending code (adding features) is the riskiest thing that you can do (bug-wise.)</li>
</ol><p>Nevertheless, no matter what code you&rsquo;re working on, every programmer faces these demands:</p>

<ol><li>Management allocates more time for development than for maintenance. (Usually <strong>after</strong> asking us for insight!)</li>
    <li>Maintenance is sloughed off onto the least experienced developer in the team.</li>
    <li>The existing feature set is looked at as a &ldquo;base,&rdquo; and new features are requested constantly.</li>
</ol><p>It is thus impossible to overestimate the importance of writing code that is as easy as possible to fix, extend, and reconfigure, even if the person doing the fixing or extending has never seen the code before.  (Or, as is perhaps more common, was the code&rsquo;s original author, but has forgotten what they were originally thinking when they wrote it.)  If you are a programmer or manager of programmers, look at it this way: at least 80% of your development budget depends on the maintainability of the code that you and your team produce.  The techniques that create maintainable code are mostly free, but not using them costs you big time.</p>

<p>As a web developer, I tend to have a somewhat extended view of product lifetimes.  There is still code on the internet from 1993, and that was back when we didn&rsquo;t know what we were doing.  Now that we&rsquo;ve got all this experience, we should expect that the code we write will be around even longer.  The programmer who gets to maintain your code might not have been born yet.  Be kind to that poor soul.</p>

<p>These are the tips that I think are the most important contributors to writing maintainable code.  It&rsquo;s a matter of opinion, to a certain extent, and there&rsquo;s plenty of disagreement, so take this for what it&rsquo;s worth.  Feedback is, of course, always welcome.</p>

<!--more-->

<h3>1. Don&rsquo;t be clever</h3>

<p>We already know you&rsquo;re smart; prove it by writing code that monkeys can understand.  Programming should be approached like a haiku, not a riddle.  Make it simple, and don&rsquo;t make me have to think hard when I come by years later to fix or change or add something.</p>

<p><a href="http://en.wikiquote.org/wiki/Brian_W._Kernighan">Brian W. Kernighan</a> famously said, &ldquo;<q>Debugging is twice as hard as writing the code in the first place. Therefore, if you write the code as cleverly as possible, you are, by definition, not smart enough to debug it.</q>&rdquo;  Try to find the balance between hard-coded and over-engineered.</p>

<h3>2. Think clearly.</h3>

<p>You can&rsquo;t teach someone to think in an organized fashion.  The best that you can do is find someone who does this already and convince them that they should do it when they write code.  Create objects that make sense for the task at hand.</p>

<p>That makes it easy to:</p>

<h3>3. Let the code describe itself</h3>

<p>Comment your code, yes, yes, you hear it all the time. But don&rsquo;t write comments that say <em>how</em> something is done.  Write comments that say <em>why</em>, and let the code speak for itself.  The only thing worse than this:</p>

<p><code class="block">// increment i by 1
i += 1;</code></p>

<p>is this:</p>

<p><code class="block">// increment i by 1
i += 2;</code></p>

<p>When you write comments that describe how instead of describing why, over time you inevitably end up with comments that lie, because code is much more likely to change than comments.  Let the code say what it does.  You just have to say why it does what it does.</p>

<h3>4. Hungarian notation is eviler than eval</h3>

<p>I sometimes think that Hungarian Notation was surely developed by some kind of mad scientist with an extreme hatred of maintenance programmers*.  It&rsquo;s almost never consistent, it&rsquo;s hard to read, and it puts information where it doesn&rsquo;t belong.  It is a profoundly flagrant violation of the rule that comments should say why and not what.</p>

<p>Consider the basic case of &ldquo;iCnt&rdquo; for an integer counter, or &lsquo;sType&rsquo; as a string, or 'oElement&rsquo; as an object.  If your code is so convoluted that a maintenance programmer doesn&rsquo;t know that your counter is an integer, or that the element reference is an object, or that &ldquo;type&rdquo; is a string, well, there&rsquo;s something deeply wrong with either your code or your hiring process.</p>

<p>Avoid Hungarian notation like the plague.</p>

<p><small>* This is a joke.  I&rsquo;m sure it was actually developed by very well-meaning programmers who were honestly trying to address this problem.  Nonetheless, it&rsquo;s a very bad solution that tends to compound the problem significantly.</small></p>

<h3>5. Small pieces, loosely coupled</h3>

<p>A lot of maintenance checklists and lint programs instruct at the expression or syntax level.  However, arguably the most important key to creating maintainable code is to build small pieces that interact with one another in loosely coupled ways.  This minimizes dependencies, reduces the amount of code that you have to write and maintain, and makes extension and re-use much simpler.</p>

<p>Less code is almost always better.  Instead of having 1 object that implements 10 features, it&rsquo;s often better to have 10 small objects that implement one feature each, and just listen for and respond to the events that they need.  Using a <a href="http://developer.yahoo.com/yui/event/#customevent">good event utility</a>, this is an extremely powerful pattern for user interface code, especially.  Widget-A just listens to an event from widget-B; when that event fires, it does its thing.  If the event never fires, then widget-A never gets activated.  This means that you can remove or change widget-B without fearing that you&rsquo;re going to cause massive regressions.</p>

<p><a href="http://codinghorror.com">Coding Horror</a> is one of my daily reads.  If you don&rsquo;t read it, you should.  Jeff Atwood put it quite well when he exhorted developers to <a href="http://www.codinghorror.com/blog/archives/000791.html">Code Smaller</a>.  They he later <a href="http://www.codinghorror.com/blog/archives/000878.html">wrote that the best code is no code at all</a>.  I couldn&rsquo;t agree more.</p>

<h3>6. Use OO (and other patterns) Wisely</h3>

<p>Object Oriented programming <em>can</em> help you follow these rules.  But, not everything <em>has</em> to inherit from something else.  There is such a thing as over-engineering.  &ldquo;Silver bullets&rdquo; approaches are common causes of this problem.</p>

<p>Use an Object Oriented approach that makes sense.  Most of the time, in my experience, inheritance is not the best approach, unless you&rsquo;re going to have a lot of types of things, where the types have a lot in common.  This means that you&rsquo;re dealing with a huge number of objects, which is not the case in most applications.  Again, <em>most of the time</em>, &ldquo;has-a&rdquo; approaches are much simpler and more flexible than &ldquo;is-a&rdquo; approaches.</p>

<p>Think of it with a real-world example.  &ldquo;Sandwich&rdquo; doesn&rsquo;t inherit from &ldquo;bread&rdquo;.  You wouldn&rsquo;t say, &ldquo;a sandwich <em>is a</em> type of bread that has stuff inside.&rdquo;  This might, arguably, be true.  But, the way that most people talk (and more importantly, how we think,) is that a sandwich is a &ldquo;thing&rdquo; that <em>has</em> bread with stuff inside.  Furthermore, a waiter is not a sandwich with legs; a waiter is a person who <em>has a</em> sandwich and brings it to you.  Since said waiter may also have a second job as an actor, it&rsquo;s not even right to say that the &ldquo;waiter&rdquo; class inherits from &ldquo;person.&rdquo;  A waiter is not a type of person, it&rsquo;s a person who <em>has a</em> job delivering food to tables.</p>

<p>Some languages implement multiple inheritance and other things that seek to address the &ldquo;multiple hats&rdquo; problem using classic OO techniques.  If you ask me, don&rsquo;t buck the epistemological trends&mdash;use the methodology that we use for everything else, and extend using has-a instead of is-a.</p>

<h3>7. Be harsh on the code, gentle on the coder</h3>

<p>We&rsquo;re all human.  We make mistakes.  Even the best of us violate the rules sometimes, and most of us, by definition, are not &ldquo;the best of us.&rdquo;  However, there is no excuse for bad code.  It should be killed on sight.  Be your own harshest critic, and never shy away from criticism.  Seek it out.  Turn to your coworkers and say, &ldquo;Hm. You know, this thing I&rsquo;m working on just seems like I&rsquo;m making it too convoluted.  Can I run my approach by you and see if I&rsquo;m over-thinking this?&rdquo;</p>

<p>Give honest criticism without any hesitation, but never <em>ever</em> say, imply, or even <em>think</em> that the programmer must have been dense.  Sure, maybe the programmer really <em>was</em> dense.  But if you&rsquo;re growing as a developer, hell, as a person, then you should think the same thing about the stuff you did last year.  Nothing is more humbling than having to support your own code a year later.  Pepper your criticism with a light-hearted attitude, and be generous in praising the parts that you think are good.  Keep your venting to yourself.  It will raise your status if you help someone else succeed; tearing down just hurts us all.</p>

<p>Sure, this might be good advice, obvious, even.  But how does it help make maintainable code?  By fostering positivity, you&rsquo;ll help create an atmosphere where bad code is not tolerated, but where everyone is encouraged to grow and experiment.  The best way to avoid bad code is to make the programmers better.</p>

<p>I personally think that a few interpersonal communication classes would be a good addition to any computer science curriculum.</p>

<h3>8. Fail</h3>

<p>You won&rsquo;t be able to create resilient systems unless you know how they&rsquo;ll break.  You won&rsquo;t know how they&rsquo;ll break until they do.</p>

<p>Failure is a prerequisite for success.  So, get ready to do it.  A lot.  I&rsquo;ve written LOTS of very bad code.  (Some of it is even here on this website!)  Plan for an alpha and beta.  Do them as fast as possible. Bang on them.  Then throw them out and start over, taking what you learned into the next version.</p>

<p>Share your failure.  Have a code review session where everyone brings in the worst code that they&rsquo;ve written for the project, and solicits ideas for what went wrong.  (It&rsquo;s kind of like an AA meeting: Hi, my name is Isaac, and I wrote bad code. <em>Hello, Isaac&hellip;</em>.)</p>

<p>It&rsquo;s so often these days, especially in big corporations with lots of different teams, for each team to share their successes loudly, but sweep their failure under the rug.  We&rsquo;re all afraid of getting a bad review, but this virtually guarantees that all the <em>other</em> teams will fail in exactly the same way.  Even in a small company with only one or two teams, sharing failure can result in an exponential reduction in errors.</p>

<p>Furthermore, sharing your own failures, and asking for criticism, makes it easier for others to take criticism when you point out bad code that they wrote.  It is very difficult to separate &ldquo;me&rdquo; from &ldquo;my code&rdquo;.  If you criticize one, the other might get hurt.  Sharing failure helps to sever this connection, and allows everyone to associate and connect with the success of the product as a whole.</p>

<p>Building a few prototype/failure builds into your development process will also help to produce stable builds faster.  It allows for user-research sooner.  By planning a throw-away build, it helps get everyone focused on which features are actually important/necessary, and which are either too difficult or unimportant to bother building.  It gets product and engineering talking sooner.</p>

<p>Failure (and handling it intelligently) is not just important, it&rsquo;s absolutely <em>vital</em> when it comes to building systems that are going to stick around for decades.</p>
<footer><a href=http://izs.tumblr.com/tagged/Code%20Beauty>#Code Beauty</a>
<a href=http://izs.tumblr.com/tagged/Code%20Ecosystems>#Code Ecosystems</a>
</footer>
</article>
<footer><nav><a href=../index.html rel=index>Index</a>
| <a href=2007-07-p1.html rel=prev>Previous</a>
| <a href=2007-05-p1.html rel=next>Next</a>
</nav></footer>
